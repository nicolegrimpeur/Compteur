<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Minuteur{{(tabTimer.length > 1) ? 's' : ''}}
    </ion-title>
    <ion-button id="nbEquipes" color="medium" slot="end" fill="clear">
      Nombre de minuteurs : {{tabTimer.length}}
    </ion-button>
  <ion-picker
    trigger="nbEquipes"
    [columns]="pickerColumns"
    [buttons]="[
      {text: 'Annuler', role: 'cancel'},
      {text: 'Valider', role: 'confirm'}
    ]"
    (didDismiss)="changeNbTimer($event)"
    ></ion-picker>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row class="center">
      <ion-col *ngFor="let timer of tabTimer, index as i" class="center" size="auto">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-row>
                <ion-col class="center">
                  {{timer.name}}
                </ion-col>
                <ion-col class="right">
                  <ion-button [id]="'editButton' + timer.id" color="medium" shape="round" fill="clear" class="edit">
                    <ion-icon name="create-outline"></ion-icon>
                  </ion-button>
                  <ion-alert
                    [trigger]="'editButton' + timer.id"
                    [header]="'Modifier l\'Ã©quipe ' + timer.name"
                    [inputs]="[{placeholder: timer.name}, {placeholder: 'Temps maximum', type: 'number', value: timer.maxTime}]"
                    [buttons]="[{text: 'Annuler', role: 'cancel'}, {text: 'Valider', role: 'confirm'}]"
                    (didDismiss)="editTimer($event, timer)"
                  ></ion-alert>
                </ion-col>
              </ion-row>
            </ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <!-- https://github.com/crisbeto/angular-svg-round-progressbar -->
            <round-progress
              [current]="tabTime[i].currentTime"
              [max]="timer.maxTime"
              [rounded]="true"
              [color]="'#808289'"
            ></round-progress>
            {{tabTime[i].currentTime}} / {{timer.maxTime}}
          </ion-card-content>
          <ion-card-content class="center">

            <ion-button color="medium" [id]="'button' + timer.id" (click)="launchTimer(timer)">
              <ion-icon name="play" slot="start"></ion-icon>
              Lancer
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
